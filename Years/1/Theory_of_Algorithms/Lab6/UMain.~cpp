//---------------------------------------------------------------------------
#include <vcl.h>
#pragma hdrstop
#include "UMain.h"
#include "UAvto.h"
#include "URandomContent.h"
#include "USearch.h"
#pragma package(smart_init)
#pragma resource "*.dfm"
//---------------------------------------------------------------------------
TfrmMain *frmMain;
//---------------------------------------------------------------------------
__fastcall TfrmMain::TfrmMain(TComponent* Owner)
        : TForm(Owner)
{
}
//---------------------------------------------------------------------------
void FEnabled1(bool f)
{
  frmMain->edtNumber->Enabled=f;
  frmMain->edtMark->Enabled=f;
  frmMain->edtNameLast->Enabled=f;
  frmMain->edtNameFirst->Enabled=f;
  frmMain->edtAddressStreet->Enabled=f;
  frmMain->edtAddressHouse->Enabled=f;
  frmMain->edtAddressFlat->Enabled=f;
  frmMain->edtReceipt->Enabled=f;
  
  frmMain->btnFirst->Enabled=!f;
  frmMain->btnPrev->Enabled=!f;
  frmMain->btnNext->Enabled=!f;
  frmMain->btnLast->Enabled=!f;
  frmMain->btnNew->Enabled=!f;
  frmMain->btnUpdate->Enabled=!f;
  frmMain->btnDelete->Enabled=!f;
  frmMain->btnSave->Enabled=f;
  frmMain->btnRandomContent->Enabled=f;
}
//---------------------------------------------------------------------------
void FShow(TAvto a)
{
  frmMain->edtNumber->Text=a.number.c_str();
  frmMain->edtMark->Text=a.mark.c_str();
  frmMain->edtNameLast->Text=a.name.last.c_str();
  frmMain->edtNameFirst->Text=a.name.first.c_str();
  frmMain->edtAddressStreet->Text=a.address.street.c_str();
  frmMain->edtAddressHouse->Text=a.address.house.c_str();
  frmMain->edtAddressFlat->Text=a.address.flat.c_str();
  frmMain->edtReceipt->Text=a.receipt.c_str();
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnSearchClick(TObject *Sender)
{
  frmSearch->Show();
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnFirstClick(TObject *Sender)
{
  FFirst();
  FShow(FGet());
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnPrevClick(TObject *Sender)
{
  FPrev();
  FShow(FGet());
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnNextClick(TObject *Sender)
{
  FNext();
  FShow(FGet());
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnLastClick(TObject *Sender)
{
  FLast();
  FShow(FGet());
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnNewClick(TObject *Sender)
{
  FNew();
  FShow(FGet());
  FEnabled1(true);
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnSaveClick(TObject *Sender)
{
  TAvto b;
  b.number=frmMain->edtNumber->Text.c_str();
  b.mark=frmMain->edtMark->Text.c_str();
  b.name.last=frmMain->edtNameLast->Text.c_str();
  b.name.first=frmMain->edtNameFirst->Text.c_str();
  b.address.street=frmMain->edtAddressStreet->Text.c_str();
  b.address.house=frmMain->edtAddressHouse->Text.c_str();
  b.address.flat=frmMain->edtAddressFlat->Text.c_str();
  b.receipt=frmMain->edtReceipt->Text.c_str();
  FSave(b);
  FEnabled1(false);
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnUpdateClick(TObject *Sender)
{
  FEnabled1(true);
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnDeleteClick(TObject *Sender)
{
  FDelete();
  FShow(FGet());
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::btnRandomContentClick(TObject *Sender)
{
  char s[1000];
  FRandom1(s);
  frmMain->edtNumber->Text=s.c_str();
}
//---------------------------------------------------------------------------

void __fastcall TfrmMain::FormCreate(TObject *Sender)
{
  FNew();
  FEnabled1(true);
}
//---------------------------------------------------------------------------